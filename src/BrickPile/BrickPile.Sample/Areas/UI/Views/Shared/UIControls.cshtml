@using System.Configuration
@using BrickPile.UI.Common
@model BrickPile.UI.IStructureInfo

@if(ViewContext.HttpContext.User.Identity.IsAuthenticated) {
    <style type="text/css" media="all">
        #brickpile-editorial-ctrls * {
            padding: 0;
            margin: 0;
        }
        #brickpile-editorial-ctrls {
            position: fixed;
            bottom: 20px;
            left: 20px;
        }
        #brickpile-editorial-ctrls a {
            background-color: rgba(0, 0, 0, 0.4);
            padding: 4px 8px;
            display: inline-block;
            border-radius: 3px;
        }
        [class^="icon-"], [class*=" icon-"] {
            display: inline-block;
            width: 16px;
            height: 16px;
            line-height: 16px;
            vertical-align: text-top;
            background-image: url("/areas/ui/content/images/sprite.png");
            background-position: 1px 1px;
            background-repeat: no-repeat;
            opacity: 0.6;
        }
        .icon-back-office {
            background-position: 1px -131px;
        }
    </style>
    <div id="brickpile-editorial-ctrls">

        @{
            var uriBuilder = new UriBuilder(@Url.RouteUrl("Pages_Default", new { model = Model.ParentPage ?? Model.StartPage }, Request.Url.Scheme));    
            if(!string.IsNullOrEmpty(ConfigurationManager.AppSettings["brickpile/uisubdomain"])) {
                var prefix = ConfigurationManager.AppSettings["brickpile/uisubdomain"];
                uriBuilder.Host = prefix + uriBuilder.Host;
            }
        } 

        <a href="@uriBuilder.ToString()" title="To the back office"><i class="icon-back-office"></i></a>
        <a href="@Url.Action("edit", new { model = Model.CurrentPage, area = "UI" })" title="Edit @Model.CurrentPage.Metadata.Name"><i class="icon-pencil"></i></a>
    </div>
}
